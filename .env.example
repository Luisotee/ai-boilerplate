# === Infrastructure (Docker Compose) ===
POSTGRES_USER=aiagent
POSTGRES_PASSWORD=               # REQUIRED: Set a strong password
POSTGRES_DB=aiagent

# === Database ===
DATABASE_URL=postgresql://aiagent:YOUR_POSTGRES_PASSWORD@localhost:5432/aiagent

# Database Connection Pooling
DB_POOL_SIZE=20                  # Number of persistent connections
DB_MAX_OVERFLOW=10               # Additional connections when pool exhausted
DB_POOL_TIMEOUT=30               # Seconds to wait for connection
DB_POOL_RECYCLE=3600             # Recycle connections after N seconds (1 hour)
DB_POOL_PRE_PING=true            # Test connections before use
DB_ECHO_POOL=false               # Log pool checkouts (debug only)

# === Redis ===
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=                  # REQUIRED: Set a strong password

# === API Keys (External Services) ===
GEMINI_API_KEY=                  # REQUIRED: Google Gemini API key
GROQ_API_KEY=                    # Optional: Groq API key for STT

# === Inter-Service Authentication ===
AI_API_KEY=                      # REQUIRED: Key for authenticating requests to AI API
WHATSAPP_API_KEY=                # REQUIRED: Key for authenticating requests to WhatsApp API

# === CORS ===
CORS_ORIGINS=                    # Comma-separated allowed origins (e.g., http://localhost:3000)

# === Rate Limiting ===
RATE_LIMIT_GLOBAL=30             # Global requests per minute
RATE_LIMIT_EXPENSIVE=5           # Expensive operation requests per minute

# === Services ===
AI_API_URL=http://localhost:8000
WHATSAPP_API_PORT=3001
WHATSAPP_API_HOST=0.0.0.0

# Fetch Timeouts (milliseconds)
FETCH_TIMEOUT_DEFAULT_MS=30000      # Default timeout for API calls (30s)
FETCH_TIMEOUT_TRANSCRIPTION_MS=60000 # Audio transcription timeout (60s)
FETCH_TIMEOUT_TTS_MS=45000          # Text-to-speech timeout (45s)
FETCH_TIMEOUT_POLLING_MS=5000       # Job status polling timeout (5s)

# Job Polling Configuration
POLL_INTERVAL_MS=500             # Interval between polling attempts (500ms)
POLL_MAX_ITERATIONS=240          # Max polling iterations (240 * 500ms = 2 minutes)
POLL_MAX_DURATION_MS=120000      # Max total polling duration (2 minutes)

# === PDF Processing Timeouts (Python AI API) ===
KB_PROCESSING_TIMEOUT_SECONDS=300    # Overall max processing time (5 minutes)
KB_DOCLING_TIMEOUT_SECONDS=180       # Max time for PDF parsing (3 minutes)
KB_EMBEDDING_TIMEOUT_SECONDS=10      # Max time per embedding API call (10 seconds)
KB_EMBEDDING_BATCH_TIMEOUT_SECONDS=240  # Max time for all embeddings (4 minutes)

# === WhatsApp Reconnection Strategy (TypeScript Client) ===
RECONNECT_INITIAL_DELAY_MS=1000      # Initial delay before first reconnection (1 second)
RECONNECT_MAX_DELAY_MS=30000         # Maximum delay between reconnection attempts (30 seconds)
RECONNECT_MAX_ATTEMPTS=10            # Maximum reconnection attempts before giving up
RECONNECT_JITTER_MS=500              # Random jitter to add to delay (prevents thundering herd)

# === Logging ===
LOG_LEVEL=info
